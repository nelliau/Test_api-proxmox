# ============================================================================
# CONFIGURATION SERVEUR - Example .env
# ============================================================================
# Copier ce fichier en .env et remplir avec vos valeurs
# NE JAMAIS commiter le fichier .env dans git !
# ============================================================================

# ============================================================================
# SERVEUR
# ============================================================================
PORT=3000
NODE_ENV=development  # development | production

# ============================================================================
# BASE DE DONNÉES MySQL
# ============================================================================
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_secure_password_here
DB_NAME=messaging_db

# ============================================================================
# SÉCURITÉ JWT
# ============================================================================
# IMPORTANT: Générer un secret fort avec:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_TO_A_RANDOM_64_CHAR_STRING_MINIMUM_32_CHARS
JWT_EXPIRES_IN=7d

# ============================================================================
# REVERSE PROXY
# ============================================================================
# Nombre de proxies devant l'API (1 = Nginx seul, 2 = CloudFlare + Nginx, etc.)
TRUST_PROXY=1

# ============================================================================
# CORS - Origines autorisées
# ============================================================================
# Séparer par des virgules pour autoriser plusieurs origines
# En production avec HTTPS, utiliser https:// !
# Développement: http://localhost:3000
# Production: https://myapp.com,https://www.myapp.com
ALLOWED_ORIGINS=http://localhost:3000

# ============================================================================
# REDIS (pour cache et sessions Socket.IO distribués)
# ============================================================================
REDIS_URL=redis://localhost:6379
# Avec mot de passe: redis://:password@localhost:6379
# Avec Redis Cloud: redis://username:password@host:port

# ============================================================================
# RATE LIMITING
# ============================================================================
# Nombre de requêtes max par IP
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes en ms
RATE_LIMIT_MAX_REQUESTS=100  # 100 requêtes max par fenêtre

# Rate limiting pour auth (plus strict)
AUTH_RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
AUTH_RATE_LIMIT_MAX_REQUESTS=5    # 5 tentatives max

# ============================================================================
# LOGS
# ============================================================================
LOG_LEVEL=info  # error | warn | info | debug
LOG_FORMAT=json  # json | simple

# ============================================================================
# UPLOADS (si vous gérez des fichiers)
# ============================================================================
MAX_FILE_SIZE=5242880  # 5MB en bytes
UPLOAD_DIR=./uploads

# ============================================================================
# EMAIL (pour notifications - optionnel)
# ============================================================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@yourapp.com

# ============================================================================
# MONITORING (optionnel)
# ============================================================================
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
# PROMETHEUS_ENABLED=true
